{"version":3,"sources":["constants/index.js","contexts/Types.js","components/Loading.jsx","components/BookCat.jsx","components/Book.jsx","components/BooksList.jsx","shared/booksApi.js","shared/vintedApi.js","reducers/booksReducer.js","components/BooksTypeSelector.jsx","components/BooksPagerPageActive.jsx","components/BooksPagerPageDots.jsx","components/BooksPagerPage.jsx","hocs/withDotsPage.jsx","hocs/withActivePage.jsx","hocs/withEmptyPage.jsx","components/BookPager.jsx","reducers/vintedReducer.js","components/VintedProduct.jsx","components/VintedList.jsx","components/VintedProductPage.jsx","components/RouterHooks.jsx","App.js","index.js"],"names":["SORT_PRICE_UP","SORT_PRICE_DOWN","GET_BOOKS_FROM_SERVER","UPDATE_BOOKS_FROM_SERVER","CHANGE_ITEMS_PER_PAGE","SET_ACTIVE_PAGE","GET_NEWS_FROM_SERVER","ADD_PRODUCT_FROM_SERVER","Types","createContext","localStorage","getItem","JSON","parse","Loading","className","BookCat","type","getType","useContext","filter","t","id","length","title","Book","book","author","src","img","alt","price","BooksList","books","map","uuidv4","axios","create","baseURL","booksReducer","state","action","sorted","allBooks","sort","a","b","showBooks","concat","slice","activePage","payload","itemsPerPage","updated","updatedBooks","console","log","BooksTypeSelector","handleTypeSelect","typeSelectValue","types","onChange","value","BooksPagerPageActive","handlePageSelect","page","onClick","BooksPagerPageDots","withDotsPage","Component","props","now","allPages","withActivePage","withEmptyPage","href","BooksPager","allItemsCount","pages","Array","Math","ceil","fill","_","vintedReducer","news","products","push","VintedProduct","productId","vintedDispatch","vinted","useEffect","API2","get","then","response","data","catch","error","p","product","to","main_img","VintedList","VintedProductPage","useParams","find","parseInt","desc","RouterHooks","pathname","useLocation","useState","pageCount","setPageCount","history","useHistory","m","useRouteMatch","pc","params","replace","App","useReducer","booksDispatch","setTypes","setTypeSelectValue","Date","lastUpdateTime","setLastUpdateTime","API","post","time","round","lastUpdateTimerId","setInterval","clearInterval","bookTypes","setItem","stringify","basename","Provider","e","target","path","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5ac1ebd0.chunk.js","sourcesContent":["// action constants\r\nexport const INCREASE = 'INCREASE';\r\nexport const DECREASE = 'DECREASE';\r\n\r\nexport const MAKE_BLACK = 'MAKE_BLACK';\r\nexport const MAKE_BROWN = 'MAKE_BROWN';\r\nexport const CHANGE_MAKER = 'CHANGE_MAKER';\r\nexport const SAVE_MAKER = 'SAVE_MAKER';\r\nexport const INIT_CARS = 'INIT_CARS';\r\nexport const ROLL_BACK = 'ROLL_BACK';\r\n\r\n\r\nexport const SORT_PRICE_UP = 'SORT_PRICE_UP';\r\nexport const SORT_PRICE_DOWN = 'SORT_PRICE_DOWN';\r\nexport const GET_BOOKS_FROM_SERVER = 'GET_BOOKS_FROM_SERVER';\r\n\r\nexport const UPDATE_BOOKS_FROM_SERVER = 'UPDATE_BOOKS_FROM_SERVER';\r\n\r\nexport const FILTER_BOOKS_BY_TYPE = 'FILTER_BOOKS_BY_TYPE';\r\nexport const CHANGE_ITEMS_PER_PAGE = 'CHANGE_ITEMS_PER_PAGE';\r\nexport const SET_ACTIVE_PAGE = 'SET_ACTIVE_PAGE';\r\n\r\n\r\n\r\nexport const GET_NEWS_FROM_SERVER = 'GET_NEWS_FROM_SERVER';\r\nexport const ADD_PRODUCT_FROM_SERVER = 'ADD_PRODUCT_FROM_SERVER';\r\n\r\n\r\nexport const ADD_SHIP = 'ADD_SHIP';\r\nexport const ADD_TRAIN = 'ADD_TRAIN';","import { createContext } from 'react';\r\n\r\nconst Types = createContext(localStorage.getItem('bookTypes') ? JSON.parse(localStorage.getItem('bookTypes')) : []);\r\n\r\nexport default Types;","const Loading = () => {\r\n    return (\r\n        <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\r\n    );\r\n}\r\nexport default Loading;","import { useContext } from \"react\";\r\nimport Types from \"../contexts/Types\";\r\nimport Loading from \"./Loading\";\r\nconst BookCat = ({type}) => {\r\n\r\n    const types = useContext(Types);\r\n\r\n    // console.log('types', types.filter(t => t.id === type));\r\n    // let cat = 'LOADING';\r\n\r\n    const getType = types.filter(t => t.id === type);\r\n    // if (getType.length) {\r\n    //     cat = getType[0].title;\r\n    // }\r\n\r\n    if (getType.length) {\r\n        return (\r\n            <div className=\"cat\">{getType[0].title}</div>\r\n        );\r\n    }\r\n    return (\r\n        <Loading/>\r\n    );\r\n\r\n    \r\n\r\n}\r\n\r\n\r\nexport default BookCat;","import BookCat from \"./BookCat\";\r\n\r\nconst Book = ({book}) => {\r\n\r\n\r\n    return (\r\n        <li>\r\n            <div className=\"content\">\r\n                <div className=\"title\">{book.title}</div>\r\n                <div className=\"author\">{book.author}</div>\r\n                <div className=\"img\"><img src={book.img} alt={book.title}/></div>\r\n                <div className=\"price\">{book.price} EUR</div>\r\n                <BookCat type={book.type}></BookCat>\r\n            </div>\r\n\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Book;","import { v4 as uuidv4 } from 'uuid';\r\nimport Book from './Book';\r\n\r\nconst BooksList = ({books}) => {\r\n\r\n\r\n    return (\r\n        <ul className=\"books-list\">\r\n            {\r\n                books.map((book) => <Book key={uuidv4()} book={book}></Book>)\r\n            }\r\n        </ul>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default BooksList;","import axios from 'axios';\r\n\r\n\r\nexport default axios.create({\r\n    baseURL: `https://in3.dev/knygos/`\r\n})","import axios from 'axios';\r\n\r\n\r\nexport default axios.create({\r\n    baseURL: `https://in3.dev/vinted/api/`\r\n})","import { UPDATE_BOOKS_FROM_SERVER, SET_ACTIVE_PAGE, SORT_PRICE_UP, SORT_PRICE_DOWN, GET_BOOKS_FROM_SERVER, FILTER_BOOKS_BY_TYPE, CHANGE_ITEMS_PER_PAGE } from \"../constants\";\r\nconst booksReducer = (state, action) => {\r\n    let sorted;\r\n    switch (action.type) {\r\n        case SORT_PRICE_UP:\r\n\r\n            sorted = state.allBooks.sort((a, b) => a.price > b.price ? 1 : -1);\r\n            return {\r\n                showBooks: [].concat(sorted).slice(\r\n                    (state.activePage - 1) * action.payload.itemsPerPage,\r\n                    state.activePage * action.payload.itemsPerPage\r\n                ),\r\n                allBooks: sorted,\r\n                activePage: state.activePage\r\n            }\r\n\r\n        case SORT_PRICE_DOWN:\r\n            sorted = state.allBooks.sort((a, b) => a.price < b.price ? 1 : -1);\r\n            return {\r\n                showBooks: [].concat(sorted).slice(\r\n                    (state.activePage - 1) * action.payload.itemsPerPage,\r\n                    state.activePage * action.payload.itemsPerPage\r\n                ),\r\n                allBooks: sorted,\r\n                activePage: state.activePage\r\n            }\r\n\r\n        case GET_BOOKS_FROM_SERVER:\r\n            return {\r\n                showBooks: action.payload.allBooks.slice(0, action.payload.itemsPerPage),\r\n                allBooks: action.payload.allBooks,\r\n                activePage: 1\r\n            };\r\n\r\n\r\n        case UPDATE_BOOKS_FROM_SERVER:\r\n\r\n            const updated = state.allBooks.concat(action.payload.updatedBooks);\r\n\r\n\r\n\r\n\r\n\r\n            console.log(updated);\r\n\r\n            return state;\r\n\r\n\r\n\r\n\r\n\r\n            // case FILTER_BOOKS_BY_TYPE:\r\n            //     if (0 === action.payload.value) return action.payload.allBooks;\r\n            //     return action.payload.allBooks.filter(b => b.type === action.payload.value)\r\n\r\n        case CHANGE_ITEMS_PER_PAGE: // tik tada kai keiciasi items per page reiksme\r\n            return {\r\n                showBooks: [].concat(state.allBooks).slice(\r\n                    0,\r\n                    action.payload.itemsPerPage\r\n                ),\r\n                allBooks: state.allBooks,\r\n                activePage: 1\r\n            }\r\n\r\n        case SET_ACTIVE_PAGE:\r\n            return {\r\n                showBooks: [].concat(state.allBooks).slice(\r\n                    (action.payload.activePage - 1) * action.payload.itemsPerPage,\r\n                    action.payload.activePage * action.payload.itemsPerPage\r\n                ),\r\n                allBooks: state.allBooks,\r\n                activePage: action.payload.activePage\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default booksReducer;","import { useContext } from \"react\";\r\nimport Types from \"../contexts/Types\";\r\n\r\nconst BooksTypeSelector = ({handleTypeSelect, typeSelectValue}) => {\r\n\r\n    const types = useContext(Types);\r\n\r\n    return (\r\n        <div className=\"selector-box\">\r\n            <select onChange={handleTypeSelect} value={typeSelectValue}>\r\n                <option value=\"0\">Select type</option>\r\n                {\r\n                    types.map(type => (\r\n                        <option key={type.id} value={type.id}>{type.title}</option>\r\n                    ))\r\n                }\r\n            </select>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nexport default BooksTypeSelector;","const BooksPagerPageActive = ({handlePageSelect, page}) => {\r\n\r\n\r\n    return (\r\n        <span onClick={()=>handlePageSelect(page + 1)}>{page + 1}</span>\r\n    )\r\n\r\n}\r\nexport default BooksPagerPageActive;","const BooksPagerPageDots = () => {\r\n\r\n\r\n    return (\r\n        <span>...</span>\r\n    )\r\n\r\n}\r\nexport default BooksPagerPageDots;","import withActivePage from \"../hocs/withActivePage\";\r\nimport withDotsPage from \"../hocs/withDotsPage\";\r\nimport withEmptyPage from \"../hocs/withEmptyPage\";\r\n\r\nconst BooksPagerPage = ({handlePageSelect, page}) => {\r\n\r\n    return (\r\n        <span onClick={()=>handlePageSelect(page + 1)}><a href=\"#\">{page + 1}</a></span>\r\n    )\r\n\r\n}\r\nexport default withDotsPage(withActivePage(withEmptyPage(BooksPagerPage)));\r\n\r\n// export default BooksPagerPage;","import BooksPagerPageDots from \"../components/BooksPagerPageDots\";\r\n\r\nconst withDotsPage = (Component) => (props) => {\r\n\r\n    const now = props.page + 1;\r\n   \r\n    return (\r\n        (now === (props.activePage + 2) && now !== props.allPages) \r\n        || (now === (props.activePage - 2) && now !== 1)\r\n        )\r\n\r\n    ? <BooksPagerPageDots {...props}/>\r\n    : <Component  {...props}/>\r\n}\r\n\r\nexport default withDotsPage;","import BooksPagerPageActive from \"../components/BooksPagerPageActive\";\r\n\r\nconst withActivePage = (Component) => (props) => {\r\n\r\n    return props.activePage === (props.page + 1) \r\n    ? <BooksPagerPageActive {...props}/>\r\n    : <Component  {...props}/>\r\n}\r\n\r\nexport default withActivePage;","const withEmptyPage = (Component) => (props) => {\r\n\r\n    const now = props.page + 1;\r\n    \r\n    return now === (props.activePage + 2) \r\n    || now === (props.activePage - 2)\r\n    || now === (props.activePage + 1) \r\n    || now === (props.activePage - 1)\r\n    || now === props.activePage\r\n    || now === 1\r\n    || now === props.allPages\r\n\r\n    ? <Component  {...props}/>\r\n    : null\r\n}\r\n\r\nexport default withEmptyPage;","import BooksPagerPage from \"./BooksPagerPage\";\r\n\r\nconst BooksPager = ({itemsPerPage, allItemsCount, handlePageSelect, activePage, allPages}) => {\r\n\r\n    const pages = Array(Math.ceil(allItemsCount/itemsPerPage)).fill(null);\r\n\r\n    return (\r\n        <div className=\"pager\">\r\n\r\n            {\r\n                pages.map((_, page) => (\r\n                    <BooksPagerPage key={page + 1} handlePageSelect={handlePageSelect} page={page} allPages={pages} allPages={pages.length} activePage={activePage}/>\r\n                ))\r\n            }\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BooksPager;","import { ADD_PRODUCT_FROM_SERVER, GET_NEWS_FROM_SERVER, SET_ACTIVE_PAGE, SORT_PRICE_UP, SORT_PRICE_DOWN, GET_BOOKS_FROM_SERVER, FILTER_BOOKS_BY_TYPE, CHANGE_ITEMS_PER_PAGE } from \"../constants\";\r\nconst vintedReducer = (state, action) => {\r\n\r\n\r\n    switch (action.type) {\r\n\r\n        case GET_NEWS_FROM_SERVER:\r\n            return {\r\n                news: action.payload,\r\n                products: state.products\r\n            };\r\n\r\n        case ADD_PRODUCT_FROM_SERVER:\r\n            const products = [].concat(state.products);\r\n            products.push(action.payload)\r\n            return {\r\n                news: state.news,\r\n                products: products\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default vintedReducer;","import API2 from '../shared/vintedApi';\r\nimport {ADD_PRODUCT_FROM_SERVER} from '../constants';\r\nimport {useEffect} from 'react';\r\nimport Loading from './Loading';\r\nimport {Link, useHistory} from 'react-router-dom';\r\n\r\n\r\nconst VintedProduct = ({productId, vintedDispatch, vinted}) => {\r\n\r\n\r\n    useEffect(()=> {\r\n        API2.get(`products/` + productId)\r\n        .then(response => {\r\n            vintedDispatch({type:ADD_PRODUCT_FROM_SERVER, payload: response.data});\r\n        })\r\n        .catch(error => {})\r\n\r\n    }, [productId]);\r\n\r\n\r\n    if (vinted.products.filter(p => p.id === productId).length) {\r\n        const product = vinted.products.filter(p => p.id === productId)[0]\r\n        return (\r\n            <li>\r\n                <Link to={`show-product/${productId}`}>\r\n                <div className=\"content\">\r\n                    <div className=\"title\">{product.title}</div>\r\n                    {/* <div className=\"author\">{book.author}</div> */}\r\n                    <div className=\"img\"><img src={product.img[product.main_img]} alt={product.title}/></div>\r\n                    {/* <div className=\"price\">{book.price} EUR</div> */}\r\n                </div>\r\n                </Link>\r\n            </li>\r\n        )\r\n    }\r\n    else {\r\n    return (\r\n        <li>\r\n            <div className=\"content\">\r\n            <Loading/>\r\n            </div>\r\n        </li>\r\n    )\r\n    }\r\n}\r\n\r\nexport default VintedProduct;","// import { v4 as uuidv4 } from 'uuid';\r\nimport VintedProduct from './VintedProduct';\r\n\r\nconst VintedList = ({vinted, vintedDispatch}) => {\r\n\r\n    return (\r\n        <ul className=\"books-list\">\r\n            {\r\n                vinted.news.map((product) => <VintedProduct key={product.id} productId={product.id} vinted={vinted} vintedDispatch={vintedDispatch}></VintedProduct>)\r\n            }\r\n        </ul>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default VintedList;","import {useParams} from 'react-router-dom';\r\n\r\nconst VintedProductPage = ({vinted}) => {\r\n\r\n\r\n    const {id} = useParams();\r\n\r\n    const product = vinted.products.find(p => p.id === parseInt(id));\r\n\r\n    \r\n\r\n    return (\r\n        <div className=\"full-product\">\r\n            <h2>{product.title}</h2>\r\n            {\r\n                product.img.map(src => <img key={src} src={src}/>)\r\n            }\r\n            <div className=\"product-desc\">\r\n                {product.desc}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default VintedProductPage;","import {useLocation, useRouteMatch, useHistory} from 'react-router-dom';\r\nimport {useState, useEffect} from 'react';\r\n\r\nconst RouterHooks = () => {\r\n\r\n    const {pathname} = useLocation();\r\n    const [pageCount, setPageCount] = useState(0);\r\n    const history = useHistory();\r\n\r\n    const m = useRouteMatch('/books/:page');\r\n\r\n    const maxPage = 8;\r\n    \r\n\r\n    console.log(m);\r\n\r\n    useEffect(() => {\r\n        setPageCount(pc => pc + 1);\r\n    }, [pathname])\r\n\r\n\r\n    if(m) {\r\n\r\n        if (m.params.page > maxPage) {\r\n            history.replace(`/books/${maxPage}`);\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <h1>BOOKS PAGE {m.params.page}</h1>\r\n            <div> Browsing in: {pathname} </div>\r\n            <div> Page view count: {pageCount}</div>\r\n \r\n         </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n           <div> Browsing in: {pathname} </div>\r\n           <div> Page view count: {pageCount}</div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default RouterHooks;","import { useEffect, useContext, useState, useReducer } from 'react';\r\nimport './Book.css';\r\nimport { UPDATE_BOOKS_FROM_SERVER, GET_NEWS_FROM_SERVER, CHANGE_ITEMS_PER_PAGE, SORT_PRICE_UP, SORT_PRICE_DOWN, GET_BOOKS_FROM_SERVER, FILTER_BOOKS_BY_TYPE, SET_ACTIVE_PAGE } from \"./constants\";\r\nimport BooksList from './components/BooksList';\r\nimport Types from './contexts/Types';\r\nimport API from './shared/booksApi';\r\nimport API2 from './shared/vintedApi';\r\n\r\nimport booksReducer from './reducers/booksReducer';\r\nimport BooksTypeSelector from './components/BooksTypeSelector';\r\nimport BooksPager from './components/BookPager';\r\n\r\n\r\n\r\nimport vintedReducer from './reducers/vintedReducer';\r\nimport VintedList from './components/VintedList';\r\nimport VintedProductPage from './components/VintedProductPage';\r\nimport History from './components/History';\r\n\r\n\r\nimport {HashRouter as Router, Link, Route, Switch, useHistory} from 'react-router-dom';\r\nimport RouterHooks from './components/RouterHooks';\r\n\r\n\r\n\r\n\r\nfunction App() { // <---- pagrindinis komponentas\r\n\r\n    // const [books, setBooks] = useState([]);\r\n\r\n\r\n    const [books, booksDispatch] = useReducer(booksReducer, {showBooks: [], allBooks: [], activePage: 1}); // tai kas yra rodoma\r\n    \r\n    const [types, setTypes] = useState(useContext(Types)); // visu tipu sarasas\r\n\r\n    const [typeSelectValue, setTypeSelectValue] = useState(0); // aktyvus filtras pagal tipa\r\n\r\n    const [itemsPerPage, setItemsPerPage] = useState(3); // viename puslapyje va tiek knygu\r\n\r\n    // const [activePage, setActivePage] = useState(1);\r\n\r\n    const [lastUpdateTime, setLastUpdateTime] = useState(Date.now());\r\n\r\n\r\n    useEffect(() => {\r\n        API.post(``, {time: (Math.round(lastUpdateTime/1000)-10)})\r\n        .then(response => {\r\n            booksDispatch({type:UPDATE_BOOKS_FROM_SERVER, payload: {updatedBooks: response.data, itemsPerPage: itemsPerPage}});\r\n            console.log(response.data)\r\n            \r\n        })\r\n        .catch(error => {})\r\n        console.log(lastUpdateTime)\r\n    }, [lastUpdateTime]);\r\n\r\n\r\n    useEffect(() => {\r\n        const lastUpdateTimerId = setInterval(\r\n            () => setLastUpdateTime(Date.now()),\r\n            10000\r\n        );\r\n        return function cleanTimer() {\r\n            clearInterval(lastUpdateTimerId)\r\n        }\r\n    }, []);\r\n\r\n\r\n    const [vinted, vintedDispatch] = useReducer(vintedReducer, {news: [], products: []});\r\n\r\n    useEffect(()=> {\r\n        API2.get(`news/`)\r\n        .then(response => {\r\n            console.log(response.data)\r\n            vintedDispatch({type:GET_NEWS_FROM_SERVER, payload: response.data});\r\n        })\r\n        .catch(error => {})\r\n\r\n    }, []);\r\n\r\n\r\n\r\n\r\n\r\n    \r\n    \r\n    useEffect(()=> {\r\n        API.get(``)\r\n        .then(response => {\r\n            console.log(response.data)\r\n            booksDispatch({type:GET_BOOKS_FROM_SERVER, payload: {allBooks: response.data, itemsPerPage: itemsPerPage}});\r\n        })\r\n        .catch(error => {})\r\n\r\n    }, [itemsPerPage]);\r\n\r\n\r\n\r\n    // types list\r\n    useEffect(()=> {\r\n        const bookTypes = JSON.parse(localStorage.getItem('bookTypes'));\r\n\r\n        console.log('bookTypes', bookTypes);\r\n        if (!bookTypes) {\r\n            API.get(`/types/`)\r\n            .then(response => {\r\n                setTypes(response.data);\r\n                localStorage.setItem('bookTypes', JSON.stringify(response.data))\r\n            })\r\n            .catch(error => {})\r\n        }\r\n    }, []);\r\n\r\n    const handleTypeSelect = e => {\r\n        setTypeSelectValue(parseInt(e.target.value));\r\n        booksDispatch({type:FILTER_BOOKS_BY_TYPE, payload:{value:parseInt(e.target.value)}})\r\n    }\r\n\r\n    \r\n    const handlePageSelect = activePage => {\r\n        console.log(activePage)\r\n        booksDispatch({type:SET_ACTIVE_PAGE, payload:{activePage: activePage, itemsPerPage: itemsPerPage}})\r\n    }\r\n\r\n\r\n    useEffect(()=> {\r\n        booksDispatch({type:CHANGE_ITEMS_PER_PAGE, payload: {itemsPerPage: itemsPerPage}});\r\n    }, [itemsPerPage]);\r\n\r\n\r\n    return (\r\n        <div className=\"App\">\r\n        <Router basename=\"react\">\r\n        <Types.Provider value={types}>\r\n            <header className=\"App-header\">\r\n\r\n                <Link to=\"/\">\r\n                <span>Home</span>\r\n                </Link>\r\n\r\n                <Link to=\"/books\">\r\n                <span>Books Store</span>\r\n                </Link>\r\n                <Link to=\"/show-vinted\">\r\n                <i>Show Vinted</i>\r\n                </Link>\r\n                <div className=\"buttons-holder\">\r\n                    <BooksTypeSelector handleTypeSelect={handleTypeSelect} typeSelectValue={typeSelectValue}></BooksTypeSelector>\r\n                    <button className=\"filter\">Apply filter</button>\r\n                    <button className=\"sort\" onClick={()=>booksDispatch({type:SORT_PRICE_UP, payload: {itemsPerPage: itemsPerPage}})}>Sort by price UP</button>\r\n                    <button className=\"sort\" onClick={()=>booksDispatch({type:SORT_PRICE_DOWN, payload: {itemsPerPage: itemsPerPage}})}>Sort by price DOWN</button>\r\n                \r\n                </div>\r\n\r\n            \r\n\r\n            </header>\r\n\r\n            <RouterHooks></RouterHooks>\r\n\r\n            <Switch>\r\n\r\n                <Route path=\"/books\">\r\n                    <main>\r\n                        <BooksList books={books.showBooks}></BooksList>\r\n                        <BooksPager activePage={books.activePage} handlePageSelect={handlePageSelect} itemsPerPage={itemsPerPage} allItemsCount={books.allBooks.length}></BooksPager>\r\n                    </main>\r\n                </Route>\r\n\r\n       \r\n                <Route path=\"/show-vinted\">\r\n                    <main>\r\n                        <VintedList vinted={vinted} vintedDispatch={vintedDispatch}></VintedList>\r\n                    </main>\r\n                </Route>\r\n\r\n                <Route path=\"/show-product/:id\">\r\n                    <main>\r\n                        <VintedProductPage vinted={vinted}></VintedProductPage>\r\n                    </main>\r\n                </Route>\r\n\r\n                <Route exact path=\"/\">\r\n                    Home sweet home\r\n                </Route>\r\n\r\n                <Route path=\"*\">\r\n                    404 PAGE NOT FOUND\r\n                </Route>\r\n\r\n            </Switch>\r\n\r\n        <footer>\r\n\r\n        </footer>\r\n        </Types.Provider>\r\n        </Router>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n// import {Provider} from 'react-redux';\n// import basic from './store/basic';\n\n\n// ReactDOM.render(\n//   <Provider store={basic}>\n//     <App />\n//   </Provider>,\n//   document.getElementById('root')\n// );\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}