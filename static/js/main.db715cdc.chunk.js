(this.webpackJsonpone=this.webpackJsonpone||[]).push([[0],{34:function(e,t,a){},35:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(28),o=a.n(s),i=(a(34),a(10)),l=(a(35),"SORT_PRICE_UP"),r="SORT_PRICE_DOWN",j="GET_BOOKS_FROM_SERVER",u="UPDATE_BOOKS_FROM_SERVER",b="CHANGE_ITEMS_PER_PAGE",d="SET_ACTIVE_PAGE",O=a(62),p=Object(c.createContext)(localStorage.getItem("bookTypes")?JSON.parse(localStorage.getItem("bookTypes")):[]),g=a(0),h=function(){return Object(g.jsxs)("div",{className:"lds-ellipsis",children:[Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{}),Object(g.jsx)("div",{})]})},v=function(e){var t=e.type,a=Object(c.useContext)(p).filter((function(e){return e.id===t}));return a.length?Object(g.jsx)("div",{className:"cat",children:a[0].title}):Object(g.jsx)(h,{})},P=function(e){var t=e.book;return Object(g.jsx)("li",{children:Object(g.jsxs)("div",{className:"content",children:[Object(g.jsx)("div",{className:"title",children:t.title}),Object(g.jsx)("div",{className:"author",children:t.author}),Object(g.jsx)("div",{className:"img",children:Object(g.jsx)("img",{src:t.img,alt:t.title})}),Object(g.jsxs)("div",{className:"price",children:[t.price," EUR"]}),Object(g.jsx)(v,{type:t.type})]})})},x=function(e){var t=e.books;return Object(g.jsx)("ul",{className:"books-list",children:t.map((function(e){return Object(g.jsx)(P,{book:e},Object(O.a)())}))})},f=a(14),m=a.n(f),y=m.a.create({baseURL:"https://in3.dev/knygos/"}),k=(m.a.create({baseURL:"https://in3.dev/vinted/api/"}),function(e,t){var a;switch(t.type){case l:return a=e.allBooks.sort((function(e,t){return e.price>t.price?1:-1})),{showBooks:[].concat(a).slice((e.activePage-1)*t.payload.itemsPerPage,e.activePage*t.payload.itemsPerPage),allBooks:a,activePage:e.activePage};case r:return a=e.allBooks.sort((function(e,t){return e.price<t.price?1:-1})),{showBooks:[].concat(a).slice((e.activePage-1)*t.payload.itemsPerPage,e.activePage*t.payload.itemsPerPage),allBooks:a,activePage:e.activePage};case j:return{showBooks:t.payload.allBooks.slice(0,t.payload.itemsPerPage),allBooks:t.payload.allBooks,activePage:1};case u:var c=e.allBooks.concat(t.payload.updatedBooks);return console.log(c),e;case b:return{showBooks:[].concat(e.allBooks).slice(0,t.payload.itemsPerPage),allBooks:e.allBooks,activePage:1};case d:return{showBooks:[].concat(e.allBooks).slice((t.payload.activePage-1)*t.payload.itemsPerPage,t.payload.activePage*t.payload.itemsPerPage),allBooks:e.allBooks,activePage:t.payload.activePage};default:return e}}),S=function(e){var t=e.handleTypeSelect,a=e.typeSelectValue,n=Object(c.useContext)(p);return Object(g.jsx)("div",{className:"selector-box",children:Object(g.jsxs)("select",{onChange:t,value:a,children:[Object(g.jsx)("option",{value:"0",children:"Select type"}),n.map((function(e){return Object(g.jsx)("option",{value:e.id,children:e.title},e.id)}))]})})},B=a(13),E=a(9),N=function(e){var t=e.handlePageSelect,a=e.page;return Object(g.jsx)("span",{onClick:function(){return t(a+1)},children:a+1})},w=function(){return Object(g.jsx)("span",{children:"..."})},_=function(e){return function(t){var a=t.page+1;return a===t.activePage+2&&a!==t.allPages||a===t.activePage-2&&1!==a?Object(g.jsx)(w,Object(E.a)({},t)):Object(g.jsx)(e,Object(E.a)({},t))}}(function(e){return function(t){return t.activePage===t.page+1?Object(g.jsx)(N,Object(E.a)({},t)):Object(g.jsx)(e,Object(E.a)({},t))}}(function(e){return function(t){var a=t.page+1;return a===t.activePage+2||a===t.activePage-2||a===t.activePage+1||a===t.activePage-1||a===t.activePage||1===a||a===t.allPages?Object(g.jsx)(e,Object(E.a)({},t)):null}}((function(e){var t=e.handlePageSelect,a=e.page;return Object(g.jsx)("span",{onClick:function(){return t(a+1)},children:Object(g.jsx)("a",{href:"#",children:a+1})})})))),T=function(e){var t=e.itemsPerPage,a=e.allItemsCount,c=e.handlePageSelect,n=e.activePage,s=(e.allPages,Array(Math.ceil(a/t)).fill(null));return Object(g.jsx)("div",{className:"pager",children:s.map((function(e,t){var a;return Object(g.jsx)(_,(a={handlePageSelect:c,page:t,allPages:s},Object(B.a)(a,"allPages",s.length),Object(B.a)(a,"activePage",n),a),t+1)}))})},I=a(8),R=a(2),C=function(){var e=Object(R.g)().pathname,t=Object(c.useState)(0),a=Object(i.a)(t,2),n=a[0],s=a[1],o=Object(R.f)(),l=Object(R.i)("/books/:page");return console.log(l),Object(c.useEffect)((function(){s((function(e){return e+1}))}),[e]),l?(l.params.page>8&&o.replace("/books/".concat(8)),Object(g.jsxs)("div",{children:[Object(g.jsxs)("h1",{children:["BOOKS PAGE ",l.params.page]}),Object(g.jsxs)("div",{children:[" Browsing in: ",e," "]}),Object(g.jsxs)("div",{children:[" Page view count: ",n]})]})):Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{children:[" Browsing in: ",e," "]}),Object(g.jsxs)("div",{children:[" Page view count: ",n]})]})};var A=function(){var e=Object(c.useReducer)(k,{showBooks:[],allBooks:[],activePage:1}),t=Object(i.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(Object(c.useContext)(p)),o=Object(i.a)(s,2),O=o[0],h=o[1],v=Object(c.useState)(0),P=Object(i.a)(v,2),f=P[0],m=P[1],B=Object(c.useState)(3),E=Object(i.a)(B,2),N=E[0],w=(E[1],Object(c.useState)(Date.now())),_=Object(i.a)(w,2),A=_[0],U=_[1];return Object(c.useEffect)((function(){y.post("",{time:Math.round(A/1e3)-10}).then((function(e){n({type:u,payload:{updatedBooks:e.data,itemsPerPage:N}}),console.log(e.data)})).catch((function(e){})),console.log(A)}),[A]),Object(c.useEffect)((function(){var e=setInterval((function(){return U(Date.now())}),1e4);return function(){clearInterval(e)}}),[]),Object(c.useEffect)((function(){y.get("").then((function(e){console.log(e.data),n({type:j,payload:{allBooks:e.data,itemsPerPage:N}})})).catch((function(e){}))}),[N]),Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("bookTypes"));console.log("bookTypes",e),e||y.get("/types/").then((function(e){h(e.data),localStorage.setItem("bookTypes",JSON.stringify(e.data))})).catch((function(e){}))}),[]),Object(c.useEffect)((function(){n({type:b,payload:{itemsPerPage:N}})}),[N]),Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(I.a,{children:Object(g.jsxs)(p.Provider,{value:O,children:[Object(g.jsxs)("header",{className:"App-header",children:[Object(g.jsx)(I.b,{to:"/",children:Object(g.jsx)("span",{children:"Home"})}),Object(g.jsx)(I.b,{to:"/books",children:Object(g.jsx)("span",{children:"Books Store"})}),Object(g.jsx)(I.b,{to:"/show-vinted",children:Object(g.jsx)("i",{children:"Show Vinted"})}),Object(g.jsxs)("div",{className:"buttons-holder",children:[Object(g.jsx)(S,{handleTypeSelect:function(e){m(parseInt(e.target.value)),n({type:"FILTER_BOOKS_BY_TYPE",payload:{value:parseInt(e.target.value)}})},typeSelectValue:f}),Object(g.jsx)("button",{className:"filter",children:"Apply filter"}),Object(g.jsx)("button",{className:"sort",onClick:function(){return n({type:l,payload:{itemsPerPage:N}})},children:"Sort by price UP"}),Object(g.jsx)("button",{className:"sort",onClick:function(){return n({type:r,payload:{itemsPerPage:N}})},children:"Sort by price DOWN"})]})]}),Object(g.jsx)(C,{}),Object(g.jsxs)(R.c,{children:[Object(g.jsx)(R.a,{path:"/books",children:Object(g.jsxs)("main",{children:[Object(g.jsx)(x,{books:a.showBooks}),Object(g.jsx)(T,{activePage:a.activePage,handlePageSelect:function(e){console.log(e),n({type:d,payload:{activePage:e,itemsPerPage:N}})},itemsPerPage:N,allItemsCount:a.allBooks.length})]})}),Object(g.jsx)(R.a,{path:"/show-vinted"}),Object(g.jsx)(R.a,{path:"/show-product/:id"}),Object(g.jsx)(R.a,{exact:!0,path:"/",children:"Home sweet home"}),Object(g.jsx)(R.a,{path:"*",children:"404 PAGE NOT FOUND"})]}),Object(g.jsx)("footer",{})]})})})};o.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.db715cdc.chunk.js.map